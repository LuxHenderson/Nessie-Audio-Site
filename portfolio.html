<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>Nessie Audio - Music</title>

  <!-- Meta Description for SEO -->
  <meta name="description" content="Explore Nessie Audio's portfolio - Original compositions and audio production work. Listen to our latest tracks and projects.">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="music.playlist">
  <meta property="og:url" content="https://nessieaudio.com/portfolio">
  <meta property="og:title" content="Nessie Audio Portfolio">
  <meta property="og:description" content="Explore Nessie Audio's portfolio - Original compositions and audio production work. Listen to our latest tracks and projects.">
  <meta property="og:image" content="https://nessieaudio.com/Nessie Audio 2026.jpg">

  <!-- Twitter Card -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://nessieaudio.com/portfolio">
  <meta property="twitter:title" content="Nessie Audio Portfolio">
  <meta property="twitter:description" content="Explore Nessie Audio's portfolio - Original compositions and audio production work. Listen to our latest tracks and projects.">
  <meta property="twitter:image" content="https://nessieaudio.com/Nessie Audio 2026.jpg">

  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;600;700&family=Inter:wght@300;400;600&family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
  <style>.site-header,.site-footer{background-color:rgba(45,39,93,0.55)}</style>
  <link rel="stylesheet" href="style.css?v=3">

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">

  <meta name="color-scheme" content="light dark">
  
  <!-- Three.js for atmospheric fog effect -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js" defer></script>
</head>
<body>
  <!-- Skip to main content for accessibility -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Three.js fog effect canvas container (background layer) -->
  <div id="fog-canvas-container"></div>

  <header class="site-header" id="top" style="background:linear-gradient(180deg,rgba(45,39,93,0.6),rgba(45,39,93,0.5))">
    <div class="container header-inner">
      <div class="brand"><a href="/home" class="logo">Nessie Audio</a></div>
      <div class="search-wrap"><input id="site-search" class="site-search" type="search" placeholder="Search site..." aria-label="Search site"></div>
      <nav class="main-nav" aria-label="Main navigation">
        <ul>
          <li><a href="/home">Home</a></li>
          <li><a href="/portfolio">Portfolio</a></li>
          <li><a href="/merch">Merch</a></li>
          <li><a href="/nessie-digital">Nessie Digital</a></li>
          <li class="cart-nav-item"><a href="/cart" class="cart-link"><span class="cart-emoji">ðŸ›’</span> <span class="cart-count">0</span></a></li>
        </ul>
      </nav>
      <button class="menu-toggle" aria-expanded="false" aria-controls="mobile-menu">Menu</button>
    </div>
    <div id="mobile-menu" class="mobile-menu" hidden>
      <ul>
        <li><a href="/home">Home</a></li>
        <li><a href="/portfolio">Portfolio</a></li>
        <li><a href="/merch">Merch</a></li>
        <li><a href="/nessie-digital">Nessie Digital</a></li>
        <li><a href="/cart">Cart <span class="cart-emoji">ðŸ›’</span> <span class="cart-count">0</span></a></li>
      </ul>
    </div>
  </header>
  <!-- ES5 fallback for mobile menu toggle (older browsers) -->
  <script>
  document.addEventListener('DOMContentLoaded', function(){
    if(window.__scriptJsLoaded) return;
    var btn = document.querySelector('.menu-toggle');
    var menu = document.getElementById('mobile-menu');
    if(!btn || !menu) return;
    btn.addEventListener('click', function(){
      var expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!expanded));
      if(menu.hasAttribute('hidden')){
        menu.removeAttribute('hidden');
        btn.textContent = 'Close';
      } else {
        menu.setAttribute('hidden','');
        btn.textContent = 'Menu';
      }
    });
    menu.addEventListener('click', function(e){
      var a = e.target;
      while(a && a.tagName !== 'A') a = a.parentElement;
      if(a){
        menu.setAttribute('hidden','');
        btn.setAttribute('aria-expanded','false');
        btn.textContent = 'Menu';
      }
    });
  });
  </script>

  <main id="main-content">
    <section class="home-content container">
      <div class="show-promo-row">
        <!-- Audio Portfolio content -->
        <section class="music">
          <h2>- Audio Portfolio</h2><br>
          <p class="lead" style="text-align: center; margin: 0 auto;">A collection of audio production work spanning multiple genres and artists, crafted with care and attention to detail.</p>
          
          <!-- Audio Player Section -->
          <div class="audio-player-section" style="margin: 3rem 0 4rem 0; padding: 3rem 2rem; background: rgba(0,0,0,0.4); border-radius: 16px; border: 1px solid #2d275d;">
            <div class="now-playing" style="margin-bottom: 2rem;">
              <div id="now-playing-label" style="font-size: 0.75rem; color: #5d4f9e; text-transform: uppercase; letter-spacing: 0.15em; margin-bottom: 1.5rem; font-weight: 400; display: none;">Now Playing</div>
              <div id="track-info" style="color: #ffffff;">
                <h2 id="track-title" style="font-size: clamp(2rem, 5vw, 3.5rem); font-weight: 600; line-height: 1.1; margin: 0 0 0.75rem 0; letter-spacing: -0.02em; transition: opacity 0.3s ease;"></h2>
                <div id="track-meta" style="font-size: clamp(1rem, 2.5vw, 1.25rem); color: #c0c0c0; font-weight: 300; letter-spacing: 0.02em; transition: opacity 0.3s ease;"></div>
              </div>
            </div>
            
            <!-- Reactive Waveform Visualizer -->
            <div id="waveform" class="waveform-container">
              <canvas id="waveform-canvas"></canvas>
            </div>

            <!-- Hidden audio element (custom controls below) -->
            <audio id="main-player" preload="none">
              <source id="audio-source" src="" type="audio/mpeg">
            </audio>

            <!-- Custom Audio Controls -->
            <div id="custom-controls" class="custom-controls">
              <button id="play-btn" class="play-btn" aria-label="Play" disabled>
                <svg id="play-icon" viewBox="0 0 24 24" width="22" height="22" fill="currentColor"><polygon points="6,3 20,12 6,21"/></svg>
                <svg id="pause-icon" viewBox="0 0 24 24" width="22" height="22" fill="currentColor" style="display:none;"><rect x="5" y="3" width="4" height="18"/><rect x="15" y="3" width="4" height="18"/></svg>
              </button>
              <span id="time-current" class="time-display">0:00</span>
              <div id="progress-bar" class="progress-bar" role="slider" aria-label="Seek" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" tabindex="0">
                <div id="progress-filled" class="progress-filled"></div>
                <div id="progress-handle" class="progress-handle"></div>
              </div>
              <span id="time-duration" class="time-display">0:00</span>
              <div class="volume-group">
                <button id="volume-btn" class="volume-btn" aria-label="Mute">
                  <svg id="vol-icon-on" viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                  <svg id="vol-icon-off" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="display:none;"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/></svg>
                </button>
                <input type="range" id="volume-slider" class="volume-slider" min="0" max="1" step="0.01" value="0.5" aria-label="Volume">
              </div>
            </div>
          </div>

          <!-- Track Catalogue by Genre -->
          <div class="track-catalogue" style="margin-top: 2rem;">
            <h2>- Track Catalogue</h2><br>
            <p style="margin-bottom: 1.5rem; text-align: center;">Click any genre to expand and select an artist. Then select a track to play.</p>
            
            <!-- BLUEGRASS -->
            <div class="genre-section" style="margin-bottom: 1.5rem;">
              <h3 class="genre-header" style="padding: 1rem; background: rgba(192,192,192,0.1); border: 1px solid rgba(192,192,192,0.3); border-radius: 8px; cursor: pointer; margin: 0;">
                â–¶ï¸Ž Bluegrass
              </h3>
              <div class="genre-content" style="display: none; padding: 1rem 0;">
                
                <!-- Barnstar! -->
                <div class="artist-section" style="margin-bottom: 1rem;">
                  <h4 class="artist-header" style="padding: 0.75rem 1rem; background: rgba(0,0,0,0.2); border: 1px solid rgba(192,192,192,0.2); border-radius: 8px; cursor: pointer; margin: 0 0 0.5rem 1rem;">
                    â–¶ï¸Ž Barnstar!
                  </h4>
                  <ul class="track-list" style="display: none; list-style: none; padding: 0; margin: 0 0 0 2rem;">
                    <li class="catalogue-item" data-src="Music/Bluegrass/Barnstar!/MP3 Files/Barnstar! - Believer.mp3" data-title="Believer" data-role="Barnstar! â€¢ Bluegrass" data-artist="Barnstar!" data-genre="Bluegrass">
                      <div class="track-item">Believer</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Bluegrass/Barnstar!/MP3 Files/Barnstar! - You Don't Know.mp3" data-title="You Don't Know" data-role="Barnstar! â€¢ Bluegrass" data-artist="Barnstar!" data-genre="Bluegrass">
                      <div class="track-item">You Don't Know</div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- CLASSICAL/CINEMATIC -->
            <div class="genre-section" style="margin-bottom: 1.5rem;">
              <h3 class="genre-header" style="padding: 1rem; background: rgba(192,192,192,0.1); border: 1px solid rgba(192,192,192,0.3); border-radius: 8px; cursor: pointer; margin: 0;">
                â–¶ï¸Ž Classical / Cinematic
              </h3>
              <div class="genre-content" style="display: none; padding: 1rem 0;">
                
                <!-- Joey Leal -->
                <div class="artist-section" style="margin-bottom: 1rem;">
                  <h4 class="artist-header" style="padding: 0.75rem 1rem; background: rgba(0,0,0,0.2); border: 1px solid rgba(192,192,192,0.2); border-radius: 8px; cursor: pointer; margin: 0 0 0.5rem 1rem;">
                    â–¶ï¸Ž Joey Leal
                  </h4>
                  <ul class="track-list" style="display: none; list-style: none; padding: 0; margin: 0 0 0 2rem;">
                    <li class="catalogue-item" data-src="Music/Clasical:Cinematic/Joey Leal/MP3 Files/Score 001.mp3" data-title="Score 001" data-role="Joey Leal â€¢ Classical/Cinematic" data-artist="Joey Leal" data-genre="Classical/Cinematic">
                      <div class="track-item">Score 001</div>
                    </li>
                  </ul>
                </div>

                <!-- Nessie Audio -->
                <div class="artist-section" style="margin-bottom: 1rem;">
                  <h4 class="artist-header" style="padding: 0.75rem 1rem; background: rgba(0,0,0,0.2); border: 1px solid rgba(192,192,192,0.2); border-radius: 8px; cursor: pointer; margin: 0 0 0.5rem 1rem;">
                    â–¶ï¸Ž Nessie Audio
                  </h4>
                  <ul class="track-list" style="display: none; list-style: none; padding: 0; margin: 0 0 0 2rem;">
                    <li class="catalogue-item" data-src="Music/Clasical:Cinematic/Nessie Audio/MP3 Files/Score 001.mp3" data-title="Score 001" data-role="Nessie Audio â€¢ Classical/Cinematic" data-artist="Nessie Audio" data-genre="Classical/Cinematic">
                      <div class="track-item">Score 001</div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- CONTEMPORARY -->
            <div class="genre-section" style="margin-bottom: 1.5rem;">
              <h3 class="genre-header" style="padding: 1rem; background: rgba(192,192,192,0.1); border: 1px solid rgba(192,192,192,0.3); border-radius: 8px; cursor: pointer; margin: 0;">
                â–¶ï¸Ž Contemporary
              </h3>
              <div class="genre-content" style="display: none; padding: 1rem 0;">
                
                <!-- Inka Land -->
                <div class="artist-section" style="margin-bottom: 1rem;">
                  <h4 class="artist-header" style="padding: 0.75rem 1rem; background: rgba(0,0,0,0.2); border: 1px solid rgba(192,192,192,0.2); border-radius: 8px; cursor: pointer; margin: 0 0 0.5rem 1rem;">
                    â–¶ï¸Ž Inka Land
                  </h4>
                  <ul class="track-list" style="display: none; list-style: none; padding: 0; margin: 0 0 0 2rem;">
                    <li class="catalogue-item" data-src="Music/Contemporary/Inka Land/MP3 Files/Inka Land - Audio 001.mp3" data-title="Audio 001" data-role="Inka Land â€¢ Contemporary" data-artist="Inka Land" data-genre="Contemporary">
                      <div class="track-item">Audio 001</div>
                    </li>
                  </ul>
                </div>

                <!-- Nessie Audio -->
                <div class="artist-section" style="margin-bottom: 1rem;">
                  <h4 class="artist-header" style="padding: 0.75rem 1rem; background: rgba(0,0,0,0.2); border: 1px solid rgba(192,192,192,0.2); border-radius: 8px; cursor: pointer; margin: 0 0 0.5rem 1rem;">
                    â–¶ï¸Ž Nessie Audio
                  </h4>
                  <ul class="track-list" style="display: none; list-style: none; padding: 0; margin: 0 0 0 2rem;">
                    <li class="catalogue-item" data-src="Music/Contemporary/Nessie Audio/MP3 Files/Nessie Audio - Caves And Crickets.mp3" data-title="Caves And Crickets" data-role="Nessie Audio â€¢ Contemporary" data-artist="Nessie Audio" data-genre="Contemporary">
                      <div class="track-item">Caves And Crickets</div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- COUNTRY -->
            <div class="genre-section" style="margin-bottom: 1.5rem;">
              <h3 class="genre-header" style="padding: 1rem; background: rgba(192,192,192,0.1); border: 1px solid rgba(192,192,192,0.3); border-radius: 8px; cursor: pointer; margin: 0;">
                â–¶ï¸Ž Country
              </h3>
              <div class="genre-content" style="display: none; padding: 1rem 0;">
                
                <!-- Angela Thomas Wade -->
                <div class="artist-section" style="margin-bottom: 1rem;">
                  <h4 class="artist-header" style="padding: 0.75rem 1rem; background: rgba(0,0,0,0.2); border: 1px solid rgba(192,192,192,0.2); border-radius: 8px; cursor: pointer; margin: 0 0 0.5rem 1rem;">
                    â–¶ï¸Ž Angela Thomas Wade
                  </h4>
                  <ul class="track-list" style="display: none; list-style: none; padding: 0; margin: 0 0 0 2rem;">
                    <li class="catalogue-item" data-src="Music/Country/Angela Thomas Wade/MP3 Files/Angela Thomas Wade - Milk Cow Blues.mp3" data-title="Milk Cow Blues" data-role="Angela Thomas Wade â€¢ Country" data-artist="Angela Thomas Wade" data-genre="Country">
                      <div class="track-item">Milk Cow Blues</div>
                    </li>
                  </ul>
                </div>

                <!-- Bobby Corbett -->
                <div class="artist-section" style="margin-bottom: 1rem;">
                  <h4 class="artist-header" style="padding: 0.75rem 1rem; background: rgba(0,0,0,0.2); border: 1px solid rgba(192,192,192,0.2); border-radius: 8px; cursor: pointer; margin: 0 0 0.5rem 1rem;">
                    â–¶ï¸Ž Bobby Corbett
                  </h4>
                  <ul class="track-list" style="display: none; list-style: none; padding: 0; margin: 0 0 0 2rem;">
                    <li class="catalogue-item" data-src="Music/Country/Bobby Corbett/MP3 Files/Bobby Corbett - Way Back When.mp3" data-title="Way Back When" data-role="Bobby Corbett â€¢ Country" data-artist="Bobby Corbett" data-genre="Country">
                      <div class="track-item">Way Back When</div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- EDM -->
            <div class="genre-section" style="margin-bottom: 1.5rem;">
              <h3 class="genre-header" style="padding: 1rem; background: rgba(192,192,192,0.1); border: 1px solid rgba(192,192,192,0.3); border-radius: 8px; cursor: pointer; margin: 0;">
                â–¶ï¸Ž EDM
              </h3>
              <div class="genre-content" style="display: none; padding: 1rem 0;">
                
                <!-- Laura Schaeffer -->
                <div class="artist-section" style="margin-bottom: 1rem;">
                  <h4 class="artist-header" style="padding: 0.75rem 1rem; background: rgba(0,0,0,0.2); border: 1px solid rgba(192,192,192,0.2); border-radius: 8px; cursor: pointer; margin: 0 0 0.5rem 1rem;">
                    â–¶ï¸Ž Laura Schaeffer
                  </h4>
                  <ul class="track-list" style="display: none; list-style: none; padding: 0; margin: 0 0 0 2rem;">
                    <li class="catalogue-item" data-src="Music/EDM/Laura Schaeffer/MP3 Files/Laura Schaeffer - Soup.mp3" data-title="Soup" data-role="Laura Schaeffer â€¢ EDM" data-artist="Laura Schaeffer" data-genre="EDM">
                      <div class="track-item">Soup</div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- INDIE -->
            <div class="genre-section" style="margin-bottom: 1.5rem;">
              <h3 class="genre-header" style="padding: 1rem; background: rgba(192,192,192,0.1); border: 1px solid rgba(192,192,192,0.3); border-radius: 8px; cursor: pointer; margin: 0;">
                â–¶ï¸Ž Indie
              </h3>
              <div class="genre-content" style="display: none; padding: 1rem 0;">
                
                <!-- Chase Jack -->
                <div class="artist-section" style="margin-bottom: 1rem;">
                  <h4 class="artist-header" style="padding: 0.75rem 1rem; background: rgba(0,0,0,0.2); border: 1px solid rgba(192,192,192,0.2); border-radius: 8px; cursor: pointer; margin: 0 0 0.5rem 1rem;">
                    â–¶ï¸Ž Chase Jack
                  </h4>
                  <ul class="track-list" style="display: none; list-style: none; padding: 0; margin: 0 0 0 2rem;">
                    <li class="catalogue-item" data-src="Music/Indie/Chase Jack/MP3 Files/A Reptile Dysfunction.mp3" data-title="A Reptile Dysfunction" data-role="Chase Jack â€¢ Indie" data-artist="Chase Jack" data-genre="Indie">
                      <div class="track-item">A Reptile Dysfunction</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Indie/Chase Jack/MP3 Files/Chase Jack - Cradle.mp3" data-title="Cradle" data-role="Chase Jack â€¢ Indie" data-artist="Chase Jack" data-genre="Indie">
                      <div class="track-item">Cradle</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Indie/Chase Jack/MP3 Files/Chase Jack - Perfect Naivety.mp3" data-title="Perfect Naivety" data-role="Chase Jack â€¢ Indie" data-artist="Chase Jack" data-genre="Indie">
                      <div class="track-item">Perfect Naivety</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Indie/Chase Jack/MP3 Files/Daddy Issues.mp3" data-title="Daddy Issues" data-role="Chase Jack â€¢ Indie" data-artist="Chase Jack" data-genre="Indie">
                      <div class="track-item">Daddy Issues</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Indie/Chase Jack/MP3 Files/Fomophobia.mp3" data-title="Fomophobia" data-role="Chase Jack â€¢ Indie" data-artist="Chase Jack" data-genre="Indie">
                      <div class="track-item">Fomophobia</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Indie/Chase Jack/MP3 Files/Guts.mp3" data-title="Guts" data-role="Chase Jack â€¢ Indie" data-artist="Chase Jack" data-genre="Indie">
                      <div class="track-item">Guts</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Indie/Chase Jack/MP3 Files/I'll Be Waiting.mp3" data-title="I'll Be Waiting" data-role="Chase Jack â€¢ Indie" data-artist="Chase Jack" data-genre="Indie">
                      <div class="track-item">I'll Be Waiting</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Indie/Chase Jack/MP3 Files/If It Keeps Me Breathing.mp3" data-title="If It Keeps Me Breathing" data-role="Chase Jack â€¢ Indie" data-artist="Chase Jack" data-genre="Indie">
                      <div class="track-item">If It Keeps Me Breathing</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Indie/Chase Jack/MP3 Files/Severance Play.mp3" data-title="Severance Play" data-role="Chase Jack â€¢ Indie" data-artist="Chase Jack" data-genre="Indie">
                      <div class="track-item">Severance Play</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Indie/Chase Jack/MP3 Files/SMTTY + Hidden Track.mp3" data-title="SMTTY + Hidden Track" data-role="Chase Jack â€¢ Indie" data-artist="Chase Jack" data-genre="Indie">
                      <div class="track-item">SMTTY + Hidden Track</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Indie/Chase Jack/MP3 Files/Sore High.mp3" data-title="Sore High" data-role="Chase Jack â€¢ Indie" data-artist="Chase Jack" data-genre="Indie">
                      <div class="track-item">Sore High</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Indie/Chase Jack/MP3 Files/Soul Fork.mp3" data-title="Soul Fork" data-role="Chase Jack â€¢ Indie" data-artist="Chase Jack" data-genre="Indie">
                      <div class="track-item">Soul Fork</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Indie/Chase Jack/MP3 Files/The Bluffs.mp3" data-title="The Bluffs" data-role="Chase Jack â€¢ Indie" data-artist="Chase Jack" data-genre="Indie">
                      <div class="track-item">The Bluffs</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Indie/Chase Jack/MP3 Files/White Torture.mp3" data-title="White Torture" data-role="Chase Jack â€¢ Indie" data-artist="Chase Jack" data-genre="Indie">
                      <div class="track-item">White Torture</div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- METAL -->
            <div class="genre-section" style="margin-bottom: 1.5rem;">
              <h3 class="genre-header" style="padding: 1rem; background: rgba(192,192,192,0.1); border: 1px solid rgba(192,192,192,0.3); border-radius: 8px; cursor: pointer; margin: 0;">
                â–¶ï¸Ž Metal
              </h3>
              <div class="genre-content" style="display: none; padding: 1rem 0;">
                
                <!-- Cosmic Lung -->
                <div class="artist-section" style="margin-bottom: 1rem;">
                  <h4 class="artist-header" style="padding: 0.75rem 1rem; background: rgba(0,0,0,0.2); border: 1px solid rgba(192,192,192,0.2); border-radius: 8px; cursor: pointer; margin: 0 0 0.5rem 1rem;">
                    â–¶ï¸Ž Cosmic Lung
                  </h4>
                  <ul class="track-list" style="display: none; list-style: none; padding: 0; margin: 0 0 0 2rem;">
                    <li class="catalogue-item" data-src="Music/Metal/Cosmic Lung/MP3 Files/Above.mp3" data-title="Above" data-role="Cosmic Lung â€¢ Metal" data-artist="Cosmic Lung" data-genre="Metal">
                      <div class="track-item">Above</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Metal/Cosmic Lung/MP3 Files/Crystal Ship.mp3" data-title="Crystal Ship" data-role="Cosmic Lung â€¢ Metal" data-artist="Cosmic Lung" data-genre="Metal">
                      <div class="track-item">Crystal Ship</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Metal/Cosmic Lung/MP3 Files/Endless Illusion.mp3" data-title="Endless Illusion" data-role="Cosmic Lung â€¢ Metal" data-artist="Cosmic Lung" data-genre="Metal">
                      <div class="track-item">Endless Illusion</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Metal/Cosmic Lung/MP3 Files/Ether.mp3" data-title="Ether" data-role="Cosmic Lung â€¢ Metal" data-artist="Cosmic Lung" data-genre="Metal">
                      <div class="track-item">Ether</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Metal/Cosmic Lung/MP3 Files/Fallen.mp3" data-title="Fallen" data-role="Cosmic Lung â€¢ Metal" data-artist="Cosmic Lung" data-genre="Metal">
                      <div class="track-item">Fallen</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Metal/Cosmic Lung/MP3 Files/Forced Metamorphosis.mp3" data-title="Forced Metamorphosis" data-role="Cosmic Lung â€¢ Metal" data-artist="Cosmic Lung" data-genre="Metal">
                      <div class="track-item">Forced Metamorphosis</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Metal/Cosmic Lung/MP3 Files/Intro.mp3" data-title="Intro" data-role="Cosmic Lung â€¢ Metal" data-artist="Cosmic Lung" data-genre="Metal">
                      <div class="track-item">Intro</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Metal/Cosmic Lung/MP3 Files/Myst Of Obsidian.mp3" data-title="Myst Of Obsidian" data-role="Cosmic Lung â€¢ Metal" data-artist="Cosmic Lung" data-genre="Metal">
                      <div class="track-item">Myst Of Obsidian</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Metal/Cosmic Lung/MP3 Files/Rituals.mp3" data-title="Rituals" data-role="Cosmic Lung â€¢ Metal" data-artist="Cosmic Lung" data-genre="Metal">
                      <div class="track-item">Rituals</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Metal/Cosmic Lung/MP3 Files/Stoned Ape.mp3" data-title="Stoned Ape" data-role="Cosmic Lung â€¢ Metal" data-artist="Cosmic Lung" data-genre="Metal">
                      <div class="track-item">Stoned Ape</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Metal/Cosmic Lung/MP3 Files/The Garden.mp3" data-title="The Garden" data-role="Cosmic Lung â€¢ Metal" data-artist="Cosmic Lung" data-genre="Metal">
                      <div class="track-item">The Garden</div>
                    </li>
                  </ul>
                </div>

                <!-- Ortus Lux -->
                <div class="artist-section" style="margin-bottom: 1rem;">
                  <h4 class="artist-header" style="padding: 0.75rem 1rem; background: rgba(0,0,0,0.2); border: 1px solid rgba(192,192,192,0.2); border-radius: 8px; cursor: pointer; margin: 0 0 0.5rem 1rem;">
                    â–¶ï¸Ž Ortus Lux
                  </h4>
                  <ul class="track-list" style="display: none; list-style: none; padding: 0; margin: 0 0 0 2rem;">
                    <li class="catalogue-item" data-src="Music/Metal/Ortus Lux/Keeper of Crows/MP3 Files/Despise.mp3" data-title="Despise" data-role="Ortus Lux â€¢ Metal" data-artist="Ortus Lux" data-genre="Metal">
                      <div class="track-item">Despise</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Metal/Ortus Lux/Keeper of Crows/MP3 Files/Did My Time.mp3" data-title="Did My Time" data-role="Ortus Lux â€¢ Metal" data-artist="Ortus Lux" data-genre="Metal">
                      <div class="track-item">Did My Time</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Metal/Ortus Lux/Keeper of Crows/MP3 Files/Freak.mp3" data-title="Freak" data-role="Ortus Lux â€¢ Metal" data-artist="Ortus Lux" data-genre="Metal">
                      <div class="track-item">Freak</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Metal/Ortus Lux/Keeper of Crows/MP3 Files/Not Here.mp3" data-title="Not Here" data-role="Ortus Lux â€¢ Metal" data-artist="Ortus Lux" data-genre="Metal">
                      <div class="track-item">Not Here</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Metal/Ortus Lux/Keeper of Crows/MP3 Files/The Witching Hour.mp3" data-title="The Witching Hour" data-role="Ortus Lux â€¢ Metal" data-artist="Ortus Lux" data-genre="Metal">
                      <div class="track-item">The Witching Hour</div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- PUNK -->
            <div class="genre-section" style="margin-bottom: 1.5rem;">
              <h3 class="genre-header" style="padding: 1rem; background: rgba(192,192,192,0.1); border: 1px solid rgba(192,192,192,0.3); border-radius: 8px; cursor: pointer; margin: 0;">
                â–¶ï¸Ž Punk
              </h3>
              <div class="genre-content" style="display: none; padding: 1rem 0;">
                
                <!-- Glampire -->
                <div class="artist-section" style="margin-bottom: 1rem;">
                  <h4 class="artist-header" style="padding: 0.75rem 1rem; background: rgba(0,0,0,0.2); border: 1px solid rgba(192,192,192,0.2); border-radius: 8px; cursor: pointer; margin: 0 0 0.5rem 1rem;">
                    â–¶ï¸Ž Glampire
                  </h4>
                  <ul class="track-list" style="display: none; list-style: none; padding: 0; margin: 0 0 0 2rem;">
                    <li class="catalogue-item" data-src="Music/Punk/Glampire/MP3 Files/Glampire - New York Nosferatu.mp3" data-title="New York Nosferatu" data-role="Glampire â€¢ Punk" data-artist="Glampire" data-genre="Punk">
                      <div class="track-item">New York Nosferatu</div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- RAP -->
            <div class="genre-section" style="margin-bottom: 1.5rem;">
              <h3 class="genre-header" style="padding: 1rem; background: rgba(192,192,192,0.1); border: 1px solid rgba(192,192,192,0.3); border-radius: 8px; cursor: pointer; margin: 0;">
                â–¶ï¸Ž Rap
              </h3>
              <div class="genre-content" style="display: none; padding: 1rem 0;">
                
                <!-- G.O.D. -->
                <div class="artist-section" style="margin-bottom: 1rem;">
                  <h4 class="artist-header" style="padding: 0.75rem 1rem; background: rgba(0,0,0,0.2); border: 1px solid rgba(192,192,192,0.2); border-radius: 8px; cursor: pointer; margin: 0 0 0.5rem 1rem;">
                    â–¶ï¸Ž G.O.D.
                  </h4>
                  <ul class="track-list" style="display: none; list-style: none; padding: 0; margin: 0 0 0 2rem;">
                    <li class="catalogue-item" data-src="Music/Rap/G.O.D./MP3 Files/I Been The Man.mp3" data-title="I Been The Man" data-role="G.O.D. â€¢ Rap" data-artist="G.O.D." data-genre="Rap">
                      <div class="track-item">I Been The Man</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Rap/G.O.D./MP3 Files/I Need You.mp3" data-title="I Need You" data-role="G.O.D. â€¢ Rap" data-artist="G.O.D." data-genre="Rap">
                      <div class="track-item">I Need You</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Rap/G.O.D./MP3 Files/I'm From The Go.mp3" data-title="I'm From The Go" data-role="G.O.D. â€¢ Rap" data-artist="G.O.D." data-genre="Rap">
                      <div class="track-item">I'm From The Go</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Rap/G.O.D./MP3 Files/Meditate.mp3" data-title="Meditate" data-role="G.O.D. â€¢ Rap" data-artist="G.O.D." data-genre="Rap">
                      <div class="track-item">Meditate</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Rap/G.O.D./MP3 Files/Memorial.mp3" data-title="Memorial" data-role="G.O.D. â€¢ Rap" data-artist="G.O.D." data-genre="Rap">
                      <div class="track-item">Memorial</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Rap/G.O.D./MP3 Files/Pain.mp3" data-title="Pain" data-role="G.O.D. â€¢ Rap" data-artist="G.O.D." data-genre="Rap">
                      <div class="track-item">Pain</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Rap/G.O.D./MP3 Files/Pressure.mp3" data-title="Pressure" data-role="G.O.D. â€¢ Rap" data-artist="G.O.D." data-genre="Rap">
                      <div class="track-item">Pressure</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Rap/G.O.D./MP3 Files/Questions.mp3" data-title="Questions" data-role="G.O.D. â€¢ Rap" data-artist="G.O.D." data-genre="Rap">
                      <div class="track-item">Questions</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Rap/G.O.D./MP3 Files/She My Type.mp3" data-title="She My Type" data-role="G.O.D. â€¢ Rap" data-artist="G.O.D." data-genre="Rap">
                      <div class="track-item">She My Type</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Rap/G.O.D./MP3 Files/Super Greatness.mp3" data-title="Super Greatness" data-role="G.O.D. â€¢ Rap" data-artist="G.O.D." data-genre="Rap">
                      <div class="track-item">Super Greatness</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Rap/G.O.D./MP3 Files/Vent.mp3" data-title="Vent" data-role="G.O.D. â€¢ Rap" data-artist="G.O.D." data-genre="Rap">
                      <div class="track-item">Vent</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Rap/G.O.D./MP3 Files/Vibe Talk.mp3" data-title="Vibe Talk" data-role="G.O.D. â€¢ Rap" data-artist="G.O.D." data-genre="Rap">
                      <div class="track-item">Vibe Talk</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Rap/G.O.D./MP3 Files/Water Patec.mp3" data-title="Water Patec" data-role="G.O.D. â€¢ Rap" data-artist="G.O.D." data-genre="Rap">
                      <div class="track-item">Water Patec</div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- ROCK -->
            <div class="genre-section" style="margin-bottom: 1.5rem;">
              <h3 class="genre-header" style="padding: 1rem; background: rgba(192,192,192,0.1); border: 1px solid rgba(192,192,192,0.3); border-radius: 8px; cursor: pointer; margin: 0;">
                â–¶ï¸Ž Rock
              </h3>
              <div class="genre-content" style="display: none; padding: 1rem 0;">
                
                <!-- Dahlia Boyer -->
                <div class="artist-section" style="margin-bottom: 1rem;">
                  <h4 class="artist-header" style="padding: 0.75rem 1rem; background: rgba(0,0,0,0.2); border: 1px solid rgba(192,192,192,0.2); border-radius: 8px; cursor: pointer; margin: 0 0 0.5rem 1rem;">
                    â–¶ï¸Ž Dahlia Boyer
                  </h4>
                  <ul class="track-list" style="display: none; list-style: none; padding: 0; margin: 0 0 0 2rem;">
                    <li class="catalogue-item" data-src="Music/Rock/Dahlia Boyer/MP3 Files/Dahlia Boyer - Call Me When You_re Sober.mp3" data-title="Call Me When You're Sober" data-role="Dahlia Boyer â€¢ Rock" data-artist="Dahlia Boyer" data-genre="Rock">
                      <div class="track-item">Call Me When You're Sober</div>
                    </li>
                  </ul>
                </div>

                <!-- Daimon B -->
                <div class="artist-section" style="margin-bottom: 1rem;">
                  <h4 class="artist-header" style="padding: 0.75rem 1rem; background: rgba(0,0,0,0.2); border: 1px solid rgba(192,192,192,0.2); border-radius: 8px; cursor: pointer; margin: 0 0 0.5rem 1rem;">
                    â–¶ï¸Ž Daimon B
                  </h4>
                  <ul class="track-list" style="display: none; list-style: none; padding: 0; margin: 0 0 0 2rem;">
                    <li class="catalogue-item" data-src="Music/Rock/Daimon B/MP3 Files/Daimon B - Pain Remains.mp3" data-title="Pain Remains" data-role="Daimon B â€¢ Rock" data-artist="Daimon B" data-genre="Rock">
                      <div class="track-item">Pain Remains</div>
                    </li>
                  </ul>
                </div>

                <!-- Nessie Audio -->
                <div class="artist-section" style="margin-bottom: 1rem;">
                  <h4 class="artist-header" style="padding: 0.75rem 1rem; background: rgba(0,0,0,0.2); border: 1px solid rgba(192,192,192,0.2); border-radius: 8px; cursor: pointer; margin: 0 0 0.5rem 1rem;">
                    â–¶ï¸Ž Nessie Audio
                  </h4>
                  <ul class="track-list" style="display: none; list-style: none; padding: 0; margin: 0 0 0 2rem;">
                    <li class="catalogue-item" data-src="Music/Rock/Nessie Audio/MP3 Files/Nessie Audio - Fine Again.mp3" data-title="Fine Again" data-role="Nessie Audio â€¢ Rock" data-artist="Nessie Audio" data-genre="Rock">
                      <div class="track-item">Fine Again</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Rock/Nessie Audio/MP3 Files/Nessie Audio - Numb.mp3" data-title="Numb" data-role="Nessie Audio â€¢ Rock" data-artist="Nessie Audio" data-genre="Rock">
                      <div class="track-item">Numb</div>
                    </li>
                    <li class="catalogue-item" data-src="Music/Rock/Nessie Audio/MP3 Files/Nessie Audio - Reach For The Sky.mp3" data-title="Reach For The Sky" data-role="Nessie Audio â€¢ Rock" data-artist="Nessie Audio" data-genre="Rock">
                      <div class="track-item">Reach For The Sky</div>
                    </li>
                  </ul>
                </div>

                <!-- Tyler Brundridge -->
                <div class="artist-section" style="margin-bottom: 1rem;">
                  <h4 class="artist-header" style="padding: 0.75rem 1rem; background: rgba(0,0,0,0.2); border: 1px solid rgba(192,192,192,0.2); border-radius: 8px; cursor: pointer; margin: 0 0 0.5rem 1rem;">
                    â–¶ï¸Ž Tyler Brundridge
                  </h4>
                  <ul class="track-list" style="display: none; list-style: none; padding: 0; margin: 0 0 0 2rem;">
                    <li class="catalogue-item" data-src="Music/Rock/Tyler Brundridge/MP3 Files/Tyler Brundridge - Still Holding On.mp3" data-title="Still Holding On" data-role="Tyler Brundridge â€¢ Rock" data-artist="Tyler Brundridge" data-genre="Rock">
                      <div class="track-item">Still Holding On</div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>

          </div>
        </section>
      </div>
    </section>
  </main>

  <footer class="site-footer" style="background:linear-gradient(180deg,rgba(45,39,93,0.6),rgba(45,39,93,0.5))">
    <div class="container footer-inner">
      <small>Â© <span id="year">2026</span> Nessie Audio. All rights reserved. |
        <a href="/privacy-policy">Privacy Policy</a> |
        <a href="/terms-of-service">Terms of Service</a>
      </small>
      <div class="footer-controls"><button id="theme-toggle" class="btn small" aria-pressed="false">Dark Mode</button></div>
    </div>
  </footer>

  <script src="script.js" defer></script>
  <script src="fogEffect.js" defer></script>
    <script src="cart.js" defer></script>
    <script>document.addEventListener('DOMContentLoaded',function(){if(window.cart&&cart.updateCartUI)cart.updateCartUI();});</script>
  
  <!-- Audio Portfolio Player Script -->
  <style>
    /* Catalogue item styling */
    .catalogue-item {
      padding: 0.6rem 1rem;
      margin: 0.25rem 0;
      cursor: pointer;
      border-radius: 6px;
      transition: all 0.2s ease;
      border-left: 3px solid transparent;
      list-style: none;
    }
    .catalogue-item:hover {
      background: rgba(192,192,192,0.05);
      border-left-color: rgba(192,192,192,0.3);
    }
    .catalogue-item.active {
      background: rgba(192,192,192,0.1);
      border-left-color: #c0c0c0;
    }
    .track-item {
      font-size: 0.95rem;
      color: #ffffff;
      transition: color 0.2s ease;
      font-weight: 400;
    }
    .catalogue-item.active .track-item { font-weight: 500; }
    .genre-header:hover, .artist-header:hover { background: rgba(192,192,192,0.15); }

    /* Waveform canvas */
    .waveform-container {
      width: 100%;
      height: 80px;
      margin: 2rem 0 1.5rem 0;
    }
    .waveform-container canvas {
      width: 100%;
      height: 100%;
      display: block;
    }

    /* Custom audio controls */
    .custom-controls {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 0 0 0;
    }

    .play-btn {
      width: 42px;
      height: 42px;
      border-radius: 50%;
      border: 1px solid rgba(192,192,192,0.4);
      background: rgba(192,192,192,0.08);
      color: #c0c0c0;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      transition: all 0.2s ease;
    }
    .play-btn:hover:not(:disabled) { background: rgba(192,192,192,0.18); color: #fff; border-color: rgba(192,192,192,0.6); }
    .play-btn:disabled { opacity: 0.3; cursor: default; }

    .time-display {
      font-size: 0.75rem;
      color: #c0c0c0;
      font-variant-numeric: tabular-nums;
      min-width: 36px;
      text-align: center;
      flex-shrink: 0;
      user-select: none;
    }

    .progress-bar {
      flex: 1;
      height: 6px;
      background: rgba(192,192,192,0.15);
      border-radius: 3px;
      cursor: pointer;
      position: relative;
      min-width: 0;
    }
    .progress-filled {
      height: 100%;
      background: rgba(192,192,192,0.5);
      border-radius: 3px;
      width: 0%;
      pointer-events: none;
      transition: background 0.15s ease;
    }
    .progress-bar:hover .progress-filled { background: #c0c0c0; }
    .progress-handle {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: #c0c0c0;
      position: absolute;
      top: 50%;
      left: 0%;
      transform: translate(-50%, -50%);
      opacity: 0;
      transition: opacity 0.15s ease;
      pointer-events: none;
    }
    .progress-bar:hover .progress-handle { opacity: 1; }

    .volume-group {
      display: flex;
      align-items: center;
      gap: 6px;
      flex-shrink: 0;
    }
    .volume-btn {
      background: none;
      border: none;
      color: #c0c0c0;
      cursor: pointer;
      padding: 4px;
      display: flex;
      align-items: center;
      transition: color 0.15s ease;
    }
    .volume-btn:hover { color: #fff; }
    .volume-slider {
      -webkit-appearance: none;
      appearance: none;
      width: 80px;
      height: 6px;
      background: rgba(192,192,192,0.15);
      border-radius: 3px;
      outline: none;
      cursor: pointer;
    }
    .volume-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: #c0c0c0;
      cursor: pointer;
      border: none;
    }
    .volume-slider::-moz-range-thumb {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: #c0c0c0;
      cursor: pointer;
      border: none;
    }
    .volume-slider::-moz-range-track {
      height: 6px;
      background: rgba(192,192,192,0.15);
      border-radius: 3px;
      border: none;
    }

    @media (max-width: 600px) {
      .custom-controls { gap: 8px; }
      .volume-group { display: none; }
    }
  </style>

  <script>
    (function() {
      'use strict';

      document.addEventListener('DOMContentLoaded', function() {
        var player = document.getElementById('main-player');
        var audioSource = document.getElementById('audio-source');
        var trackTitle = document.getElementById('track-title');
        var trackMeta = document.getElementById('track-meta');
        var nowPlayingLabel = document.getElementById('now-playing-label');
        var catalogueItems = document.querySelectorAll('.catalogue-item');
        var genreHeaders = document.querySelectorAll('.genre-header');
        var artistHeaders = document.querySelectorAll('.artist-header');
        var waveformContainer = document.getElementById('waveform');
        var canvas = document.getElementById('waveform-canvas');
        var ctx = canvas.getContext('2d');

        // roundRect polyfill for older browsers
        if (!ctx.roundRect) {
          CanvasRenderingContext2D.prototype.roundRect = function(x, y, w, h, r) {
            if (r > w / 2) r = w / 2;
            if (r > h / 2) r = h / 2;
            this.moveTo(x + r, y);
            this.lineTo(x + w - r, y);
            this.arcTo(x + w, y, x + w, y + r, r);
            this.lineTo(x + w, y + h - r);
            this.arcTo(x + w, y + h, x + w - r, y + h, r);
            this.lineTo(x + r, y + h);
            this.arcTo(x, y + h, x, y + h - r, r);
            this.lineTo(x, y + r);
            this.arcTo(x, y, x + r, y, r);
          };
        }

        // Custom controls
        var playBtn = document.getElementById('play-btn');
        var playIcon = document.getElementById('play-icon');
        var pauseIcon = document.getElementById('pause-icon');
        var timeCurrent = document.getElementById('time-current');
        var timeDuration = document.getElementById('time-duration');
        var progressBar = document.getElementById('progress-bar');
        var progressFilled = document.getElementById('progress-filled');
        var progressHandle = document.getElementById('progress-handle');

        var volumeSlider = document.getElementById('volume-slider');
        var volumeBtn = document.getElementById('volume-btn');
        var volIconOn = document.getElementById('vol-icon-on');
        var volIconOff = document.getElementById('vol-icon-off');

        var currentTrack = null;
        var audioCtx = null;
        var analyser = null;
        var gainNode = null;
        var sourceNode = null;
        var frequencyData = null;
        var animFrameId = null;
        var isPlaying = false;
        var isSeeking = false;
        var currentVolume = 0.5;
        var savedVolume = 0.5;

        // Keep element volume at max; GainNode handles actual volume (Safari ignores element.volume)
        player.volume = 1.0;

        // --- Web Audio API setup (lazy, on first user gesture) ---
        function initAudioContext() {
          if (audioCtx) return;
          var AC = window.AudioContext || window.webkitAudioContext;
          audioCtx = new AC();
          analyser = audioCtx.createAnalyser();
          analyser.fftSize = 256;
          analyser.smoothingTimeConstant = 0.8;
          frequencyData = new Uint8Array(analyser.frequencyBinCount);
          gainNode = audioCtx.createGain();
          gainNode.gain.value = currentVolume;
          sourceNode = audioCtx.createMediaElementSource(player);
          // source â†’ analyser â†’ gain â†’ output (waveform stays full-strength)
          sourceNode.connect(analyser);
          analyser.connect(gainNode);
          gainNode.connect(audioCtx.destination);
        }

        function setVolume(val) {
          currentVolume = val;
          if (gainNode) gainNode.gain.value = val;
        }

        // --- Canvas drawing ---
        function resizeCanvas() {
          var rect = canvas.getBoundingClientRect();
          canvas.width = rect.width * (window.devicePixelRatio || 1);
          canvas.height = rect.height * (window.devicePixelRatio || 1);
        }

        function drawWaveform() {
          animFrameId = requestAnimationFrame(drawWaveform);
          if (!analyser) return;

          analyser.getByteFrequencyData(frequencyData);

          var w = canvas.width;
          var h = canvas.height;
          var centerY = h / 2;
          ctx.clearRect(0, 0, w, h);

          // Mirror: use half the bins, draw each from center outward in both directions
          var halfCount = Math.min(Math.floor(frequencyData.length / 2), 40);
          var totalBars = halfCount * 2;
          var gapWidth = 2 * (window.devicePixelRatio || 1);
          var barWidth = (w - (totalBars - 1) * gapWidth) / totalBars;
          var maxHalf = h * 0.45;

          for (var i = 0; i < halfCount; i++) {
            var value = frequencyData[i] / 255;
            var halfBar = Math.max(1, value * maxHalf);

            // Purple gradient: deeper at low values, brighter at peaks
            var alpha = 0.3 + value * 0.6;
            var r = Math.round(45 + value * 80);
            var g = Math.round(39 + value * 50);
            var b = Math.round(93 + value * 90);
            ctx.fillStyle = 'rgba(' + r + ',' + g + ',' + b + ',' + alpha + ')';

            // Right half (center â†’ right edge)
            var xRight = (halfCount + i) * (barWidth + gapWidth);
            ctx.beginPath();
            ctx.roundRect(xRight, centerY - halfBar, barWidth, halfBar, 1.5);
            ctx.fill();
            ctx.beginPath();
            ctx.roundRect(xRight, centerY, barWidth, halfBar, 1.5);
            ctx.fill();

            // Left half (center â†’ left edge, mirrored)
            var xLeft = (halfCount - 1 - i) * (barWidth + gapWidth);
            ctx.beginPath();
            ctx.roundRect(xLeft, centerY - halfBar, barWidth, halfBar, 1.5);
            ctx.fill();
            ctx.beginPath();
            ctx.roundRect(xLeft, centerY, barWidth, halfBar, 1.5);
            ctx.fill();
          }
        }

        function startVisualization() {
          if (animFrameId) cancelAnimationFrame(animFrameId);
          resizeCanvas();
          drawWaveform();
        }

        function stopVisualization() {
          if (animFrameId) {
            cancelAnimationFrame(animFrameId);
            animFrameId = null;
          }
        }

        // Draw idle state (low static bars) when paused
        function drawIdleBars() {
          resizeCanvas();
          var w = canvas.width;
          var h = canvas.height;
          var centerY = h / 2;
          ctx.clearRect(0, 0, w, h);
          var halfCount = 40;
          var totalBars = halfCount * 2;
          var gapWidth = 2 * (window.devicePixelRatio || 1);
          var barWidth = (w - (totalBars - 1) * gapWidth) / totalBars;
          for (var i = 0; i < halfCount; i++) {
            var halfBar = 1 + Math.random() * 3;
            ctx.fillStyle = 'rgba(45,39,93,0.35)';
            // Right half
            var xRight = (halfCount + i) * (barWidth + gapWidth);
            ctx.beginPath();
            ctx.roundRect(xRight, centerY - halfBar, barWidth, halfBar, 1);
            ctx.fill();
            ctx.beginPath();
            ctx.roundRect(xRight, centerY, barWidth, halfBar, 1);
            ctx.fill();
            // Left half (mirrored, same height)
            var xLeft = (halfCount - 1 - i) * (barWidth + gapWidth);
            ctx.beginPath();
            ctx.roundRect(xLeft, centerY - halfBar, barWidth, halfBar, 1);
            ctx.fill();
            ctx.beginPath();
            ctx.roundRect(xLeft, centerY, barWidth, halfBar, 1);
            ctx.fill();
          }
        }

        // --- Time formatting ---
        function formatTime(seconds) {
          if (isNaN(seconds) || !isFinite(seconds)) return '0:00';
          var m = Math.floor(seconds / 60);
          var s = Math.floor(seconds % 60);
          return m + ':' + (s < 10 ? '0' : '') + s;
        }

        // --- Play/Pause ---
        function updatePlayState() {
          if (player.paused) {
            playIcon.style.display = '';
            pauseIcon.style.display = 'none';
            playBtn.setAttribute('aria-label', 'Play');
            isPlaying = false;
            stopVisualization();
            drawIdleBars();
          } else {
            playIcon.style.display = 'none';
            pauseIcon.style.display = '';
            playBtn.setAttribute('aria-label', 'Pause');
            isPlaying = true;
            startVisualization();
          }
        }

        playBtn.addEventListener('click', function() {
          if (!audioSource.src || audioSource.src === window.location.href) return;
          initAudioContext();
          if (audioCtx.state === 'suspended') audioCtx.resume();
          if (player.paused) {
            player.play().catch(function(e) { console.error('Play failed:', e); });
          } else {
            player.pause();
          }
        });

        player.addEventListener('play', updatePlayState);
        player.addEventListener('pause', updatePlayState);

        // --- Progress bar ---
        player.addEventListener('timeupdate', function() {
          if (isSeeking) return;
          var pct = player.duration ? (player.currentTime / player.duration) * 100 : 0;
          progressFilled.style.width = pct + '%';
          progressHandle.style.left = pct + '%';
          progressBar.setAttribute('aria-valuenow', Math.round(pct));
          timeCurrent.textContent = formatTime(player.currentTime);
        });

        player.addEventListener('loadedmetadata', function() {
          timeDuration.textContent = formatTime(player.duration);
        });

        player.addEventListener('durationchange', function() {
          timeDuration.textContent = formatTime(player.duration);
        });

        // Seek on click/drag
        function seekFromEvent(e) {
          var rect = progressBar.getBoundingClientRect();
          var x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
          var pct = Math.max(0, Math.min(1, x / rect.width));
          if (player.duration) {
            player.currentTime = pct * player.duration;
          }
          progressFilled.style.width = (pct * 100) + '%';
          progressHandle.style.left = (pct * 100) + '%';
        }

        progressBar.addEventListener('mousedown', function(e) {
          isSeeking = true;
          seekFromEvent(e);
          function onMove(ev) { seekFromEvent(ev); }
          function onUp() {
            isSeeking = false;
            document.removeEventListener('mousemove', onMove);
            document.removeEventListener('mouseup', onUp);
          }
          document.addEventListener('mousemove', onMove);
          document.addEventListener('mouseup', onUp);
        });

        progressBar.addEventListener('touchstart', function(e) {
          isSeeking = true;
          seekFromEvent(e);
          function onMove(ev) { ev.preventDefault(); seekFromEvent(ev); }
          function onUp() {
            isSeeking = false;
            document.removeEventListener('touchmove', onMove);
            document.removeEventListener('touchend', onUp);
          }
          document.addEventListener('touchmove', onMove, { passive: false });
          document.addEventListener('touchend', onUp);
        }, { passive: false });

        // Keyboard seek (left/right arrows)
        progressBar.addEventListener('keydown', function(e) {
          if (!player.duration) return;
          if (e.key === 'ArrowRight') { player.currentTime = Math.min(player.duration, player.currentTime + 5); }
          if (e.key === 'ArrowLeft') { player.currentTime = Math.max(0, player.currentTime - 5); }
        });

        // --- Volume control (uses GainNode for Safari compatibility) ---
        function updateVolumeIcon() {
          if (currentVolume === 0) {
            volIconOn.style.display = 'none';
            volIconOff.style.display = '';
          } else {
            volIconOn.style.display = '';
            volIconOff.style.display = 'none';
          }
        }

        volumeSlider.addEventListener('input', function() {
          setVolume(parseFloat(this.value));
          updateVolumeIcon();
        });

        volumeBtn.addEventListener('click', function() {
          if (currentVolume > 0) {
            savedVolume = currentVolume;
            setVolume(0);
            volumeSlider.value = 0;
          } else {
            setVolume(savedVolume);
            volumeSlider.value = savedVolume;
          }
          updateVolumeIcon();
        });

        // --- Track ended ---
        player.addEventListener('ended', function() {
          updatePlayState();
          progressFilled.style.width = '0%';
          progressHandle.style.left = '0%';
          timeCurrent.textContent = '0:00';
        });

        player.addEventListener('error', function() {
          trackMeta.textContent = 'Unable to load audio file';
          updatePlayState();
        });

        // Resize canvas on window resize
        window.addEventListener('resize', function() {
          if (isPlaying) { resizeCanvas(); }
          else { drawIdleBars(); }
        });

        // Draw idle bars on page load (always visible)
        drawIdleBars();

        // --- Genre/artist toggles (unchanged) ---
        genreHeaders.forEach(function(header) {
          header.addEventListener('click', function() {
            var content = this.nextElementSibling;
            var isOpen = content.style.display === 'block';
            var text = this.textContent.trim();
            while (text.startsWith('\u25B6') || text.startsWith('\u25BC') || text.startsWith('\uFE0E')) {
              text = text.substring(1).trim();
            }
            if (isOpen) {
              content.style.display = 'none';
              this.textContent = '\u25B6\uFE0E ' + text;
            } else {
              content.style.display = 'block';
              this.textContent = '\u25BC\uFE0E ' + text;
            }
          });
        });

        artistHeaders.forEach(function(header) {
          header.addEventListener('click', function() {
            var trackList = this.nextElementSibling;
            var isOpen = trackList.style.display === 'block';
            var text = this.textContent.trim();
            while (text.startsWith('\u25B6') || text.startsWith('\u25BC') || text.startsWith('\uFE0E')) {
              text = text.substring(1).trim();
            }
            if (isOpen) {
              trackList.style.display = 'none';
              this.textContent = '\u25B6\uFE0E ' + text;
            } else {
              trackList.style.display = 'block';
              this.textContent = '\u25BC\uFE0E ' + text;
            }
          });
        });

        // --- Track selection ---
        function loadTrack(item) {
          var src = item.getAttribute('data-src');
          var title = item.getAttribute('data-title');
          var role = item.getAttribute('data-role');

          if (trackTitle.textContent) {
            trackTitle.style.opacity = '0.3';
            trackMeta.style.opacity = '0.3';
          }

          // Init audio context on first track load (user gesture)
          initAudioContext();
          if (audioCtx.state === 'suspended') audioCtx.resume();

          setTimeout(function() {
            audioSource.src = src;
            player.load();

            trackTitle.textContent = title;
            trackMeta.textContent = role;
            trackTitle.style.opacity = '1';
            trackMeta.style.opacity = '1';
            nowPlayingLabel.style.display = '';

            // Reset progress
            progressFilled.style.width = '0%';
            progressHandle.style.left = '0%';
            timeCurrent.textContent = '0:00';
            timeDuration.textContent = '0:00';
            playBtn.disabled = false;

            player.addEventListener('canplay', function autoPlay() {
              player.play().catch(function(error) {
                console.error('Playback failed:', error);
                trackMeta.textContent = 'Error loading audio file';
              });
              player.removeEventListener('canplay', autoPlay);
            }, { once: true });
          }, trackTitle.textContent ? 150 : 0);

          if (currentTrack) currentTrack.classList.remove('active');
          item.classList.add('active');
          currentTrack = item;
        }

        catalogueItems.forEach(function(item) {
          item.addEventListener('click', function() { loadTrack(item); });
          item.setAttribute('tabindex', '0');
          item.setAttribute('role', 'button');
          item.setAttribute('aria-label', 'Play ' + item.getAttribute('data-title'));
          item.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              loadTrack(item);
            }
          });
        });
      });
    })();
  </script>
  <!-- ES5 fallback for dark mode toggle (older browsers) -->
  <script>
  document.addEventListener('DOMContentLoaded', function(){
    if(window.__scriptJsLoaded) return;
    var toggle = document.getElementById('theme-toggle');
    var root = document.documentElement;
    var saved = localStorage.getItem('naevermore-theme');
    if(saved) root.setAttribute('data-theme', saved);
    if(!toggle) return;
    var isDark = (root.getAttribute('data-theme') === 'dark');
    toggle.textContent = isDark ? 'Light Mode' : 'Dark Mode';
    toggle.setAttribute('aria-pressed', String(isDark));
    toggle.addEventListener('click', function(){
      var current = root.getAttribute('data-theme');
      var next = (current === 'dark') ? '' : 'dark';
      if(next){ root.setAttribute('data-theme', next); } else { root.removeAttribute('data-theme'); }
      localStorage.setItem('naevermore-theme', next);
      var isNowDark = (next === 'dark');
      toggle.textContent = isNowDark ? 'Light Mode' : 'Dark Mode';
      toggle.setAttribute('aria-pressed', String(isNowDark));
    });
  });
  </script>
</body>
</html>
